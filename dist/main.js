(()=>{const e=document.querySelector(".form-data"),t=document.querySelector(".region-name"),o=document.querySelector(".api-key"),n=document.querySelector(".errors"),l=document.querySelector(".loading"),a=document.querySelector(".result-container"),r=document.querySelector(".carbon-usage"),c=document.querySelector(".fossil-fuel"),y=document.querySelector(".my-region"),s=document.querySelector(".clear-btn");function i(){const t=localStorage.getItem("apiKey"),o=localStorage.getItem("regionName");null===t||null===o?(e.style.display="block",a.style.display="none",l.style.display="none",s.style.display="none",n.textContent=""):(d(0,o),a.style.display="none",e.style.display="none",s.style.display="block")}async function d(e,t){try{l.style.display="block",a.style.display="none",n.textContent="",await new Promise(e=>setTimeout(e,1500)),l.style.display="none",a.style.display="block",y.textContent=t,r.textContent=(300*Math.random()).toFixed(2)+" gCO₂/kWh",c.textContent=(100*Math.random()).toFixed(1)+"%"}catch(e){l.style.display="none",n.textContent="⚠️ Failed to fetch data. Please check your API key."}}e.addEventListener("submit",e=>function(e){var a,r;e.preventDefault(),a=o.value,r=t.value,localStorage.setItem("apiKey",a),localStorage.setItem("regionName",r),l.style.display="block",n.textContent="",s.style.display="block",d(0,r)}(e)),s.addEventListener("click",e=>function(e){e.preventDefault(),localStorage.removeItem("regionName"),localStorage.removeItem("apiKey"),i()}(e)),i()})();